<!doctype html>
<html lang="en">
  <head>
    <!-- Preconnect hints for faster CDN resolution -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600&display=swap">

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS Exercise 1: Current Day & Time</title>
    
    <!-- CodeMirror CSS -->
    <!-- CodeMirror CSS (Non-blocking) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/monokai.min.css" media="print" onload="this.media='all'">
    <noscript>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/monokai.min.css">
    </noscript>
    
    <!-- CodeMirror JS -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
    
    <link rel="preload" href="style.min.css" as="style">
    <link rel="stylesheet" href="style.min.css?v=15" />
    <!-- Mermaid JS for Diagrams -->
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>document.addEventListener('DOMContentLoaded', () => mermaid.initialize({startOnLoad:true, theme: 'dark', securityLevel: 'loose', fontFamily: 'Inter, sans-serif'}));</script>
  </head>
  <body>
    <!-- Back to Dashboard -->
    <a href="index.html" class="btn-back"><span class="nav-arrow">‚Üê</span> Dashboard</a>

    <!-- Exercise Navigation -->
    <div class="exercise-nav">
      <span class="nav-btn disabled"><span class="nav-arrow">‚Üê</span> Previous</span>
      <span class="exercise-number">Exercise 1 of 27</span>
      <a href="02_print_window.html" class="nav-btn">Next <span class="nav-arrow">‚Üí</span></a>
    </div>

    <!-- Centered Clock Section -->
    <div class="clock-section" style="width: 100%; display: flex; justify-content: center; margin-top: 40px;">
        <div class="clock-container">
          <div class="day-label">
            Today is: <span id="day-display" class="day-value">Loading...</span>
          </div>
          <div class="time-display" id="time-display">-- : -- : --</div>
        </div>
    </div>

    <!-- Split Layout Container -->
    <div class="exercise-split-view">
      
      <!-- Left Panel: Tutorial Only -->
      <div class="left-panel">
         <!-- Clock moved out -->

        <!-- Tutorial Section -->
        <div class="tutorial-container">
          <div class="tutorial-title"><span class="title-icon">üéì</span> Gi·∫£i th√≠ch chi ti·∫øt cho ng∆∞·ªùi m·ªõi</div>
          <p style="color: #8b949e; margin-bottom: 20px; font-size: 0.95rem; line-height: 1.6;">
            ƒê·ªÉ l√†m ƒë∆∞·ª£c ƒë·ªìng h·ªì n√†y, ch√∫ng ta c·∫ßn 3 b∆∞·ªõc ch√≠nh:
            <strong>L·∫•y d·ªØ li·ªáu</strong> (t·ª´ m√°y t√≠nh), <strong>X·ª≠ l√Ω</strong> (ƒë·ªïi sang ƒë·ªãnh d·∫°ng ƒë·∫πp), v√† <strong>Hi·ªÉn th·ªã</strong> (c·∫≠p nh·∫≠t li√™n t·ª•c).
          </p>
          <ul class="step-list">
            <li class="step-item">
              <strong>1. Nguy√™n li·ªáu (Data Source):</strong><br />
              Javascript c√≥ s·∫µn c√¥ng c·ª• <code>new Date()</code>. N√≥ gi·ªëng nh∆∞ b·∫°n nh√¨n v√†o ƒë·ªìng h·ªì h·ªá th·ªëng c·ªßa m√°y t√≠nh ƒë·ªÉ bi·∫øt gi·ªù hi·ªán t·∫°i.
            </li>
            <li class="step-item">
              <strong>2. X·ª≠ l√Ω Th·ª© (Day Mapping):</strong><br />
              M√°y t√≠nh tr·∫£ v·ªÅ th·ª© d∆∞·ªõi d·∫°ng s·ªë (0 l√† Ch·ªß nh·∫≠t, 1 l√† Th·ª© hai...). Ch√∫ng ta c·∫ßn m·ªôt "cu·ªën t·ª´ ƒëi·ªÉn" (m·∫£ng Array) ƒë·ªÉ d·ªãch s·ªë n√†y sang ti·∫øng Anh/Vi·ªát.
            </li>
            <li class="step-item">
              <strong>3. Logic 12 gi·ªù (AM/PM):</strong><br />
              ƒê·ªìng h·ªì m√°y t√≠nh th∆∞·ªùng l√† 24h (0-23).
              <ul style="margin-top: 5px; padding-left: 20px; color: #8b949e; font-size: 0.9em;">
                <li>N·∫øu gi·ªù &lt; 12: L√† s√°ng (AM).</li>
                <li>N·∫øu gi·ªù >= 12: L√† chi·ªÅu/t·ªëi (PM).</li>
                <li>N·∫øu gi·ªù > 12: Ta tr·ª´ ƒëi 12 ƒë·ªÉ quay v·ªÅ 1, 2, 3... chi·ªÅu.</li>
              </ul>
            </li>
            <li class="step-item">
              <strong>4. C·∫≠p nh·∫≠t li√™n t·ª•c (Loop):</strong><br />
              H√†m <code>setInterval</code> gi·ªëng nh∆∞ m·ªôt c√°i ƒë·ªìng h·ªì b√°o th·ª©c, c·ª© m·ªói 1000ms (1 gi√¢y) n√≥ s·∫Ω "reng" m·ªôt l·∫ßn ƒë·ªÉ nh·∫Øc tr√¨nh duy·ªát v·∫Ω l·∫°i gi·ªù m·ªõi.
            </li>
          </ul>

          <div class="tutorial-title" style="margin-top: 24px; border-top: 1px solid #30363d; padding-top: 16px;"><span class="title-icon">üìä</span> Logic Flowchart</div>
          <div class="mermaid" style="background: rgba(13, 17, 23, 0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px; display: flex; justify-content: center;">
            flowchart TD
                Start([Start Timer]) --> GetTime[Get Date & Time]
                GetTime --> CheckDay[Convert Day Number to Name]
                CheckDay --> CheckAMPM{Hour >= 12?}
                CheckAMPM -- Yes --> SetPM[Set 'PM']
                CheckAMPM -- No --> SetAM[Set 'AM']
                SetPM --> Format12h{Hour > 12?}
                Format12h -- Yes --> Subtract12[Hour = Hour - 12]
                Format12h -- No --> CheckSpecial[Check Special Cases]
                SetAM --> CheckSpecial
                Subtract12 --> CheckSpecial
                CheckSpecial --> Special{Hour == 0?}
                Special -- Yes --> CheckExact{Min=0 & Sec=0?}
                Special -- No --> FormatStr[Format Output]
                CheckExact -- Yes --> SetNoonMid[Set 'Noon' / 'Midnight']
                CheckExact -- No --> Set12[Set Hour = 12]
                SetNoonMid --> FormatStr
                Set12 --> FormatStr
                FormatStr --> UpdateUI[Update Display]
                UpdateUI --> End([Wait 1s])
                End -.-> Start
                
                style Start fill:#238636,stroke:#333,stroke-width:2px,color:#fff
                style End fill:#238636,stroke:#333,stroke-width:2px,color:#fff
                style CheckAMPM fill:#1f6feb,stroke:#333,color:#fff
                style Format12h fill:#1f6feb,stroke:#333,color:#fff
                style Special fill:#d29922,stroke:#333,color:#fff
                style CheckExact fill:#d29922,stroke:#333,color:#fff
          </div>
          
          <div class="code-block">
            <span class="comment">// Get the current date and time</span>
            <span class="keyword">const</span> today = <span class="keyword">new</span> <span class="function">Date</span>();
            
            <span class="comment">// Get the day of the week (0-6)</span>
            <span class="keyword">const</span> day = today.<span class="function">getDay</span>();
            <span class="keyword">const</span> daylist = [<span class="string">"Sunday"</span>, <span class="string">"Monday"</span>, <span class="string">"Tuesday"</span>, <span class="string">"Wednesday"</span>, <span class="string">"Thursday"</span>, <span class="string">"Friday"</span>, <span class="string">"Saturday"</span>];
            
            <span class="function">console.log</span>(`Today is: ${daylist[day]}.`);
            
            <span class="comment">// Get current time</span>
            <span class="keyword">let</span> hour = today.<span class="function">getHours</span>();
            <span class="keyword">const</span> minute = today.<span class="function">getMinutes</span>();
            <span class="keyword">const</span> second = today.<span class="function">getSeconds</span>();
            
            <span class="comment">// Determine AM/PM</span>
            <span class="keyword">let</span> prepand = (hour >= 12) ? <span class="string">" PM "</span> : <span class="string">" AM "</span>;
            hour = (hour >= 12) ? hour - 12 : hour;
            
            <span class="comment">// Check for special cases: Noon/Midnight</span>
            <span class="keyword">if</span> (hour === 0 && prepand === <span class="string">' PM '</span>) {
                <span class="keyword">if</span> (minute === 0 && second === 0) {
                    hour = 12; prepand = <span class="string">' Noon'</span>;
                } <span class="keyword">else</span> {
                    hour = 12; prepand = <span class="string">' PM'</span>;
                }
            }
            <span class="keyword">if</span> (hour === 0 && prepand === <span class="string">' AM '</span>) {
                <span class="keyword">if</span> (minute === 0 && second === 0) {
                    hour = 12; prepand = <span class="string">' Midnight'</span>;
                } <span class="keyword">else</span> {
                    hour = 12; prepand = <span class="string">' AM'</span>;
                }
            }
            
            <span class="function">console.log</span>(`Current Time: ${hour}${prepand} : ${minute} : ${second}`);
          </div>
        </div>
      </div>


    <!-- Console & Run Area -->
    <!-- Mini IDE Container -->
    <div id="ide-root" class="interaction-area"></div>

    <script defer src="utils.js?v=5"></script>
    <script>
      // Default Code for Student
      const defaultCode = `
// Variable to store the timer interval
if (window.clockInterval) clearInterval(window.clockInterval);

function updateClock() {
  const today = new Date();
  
  // Get Day
  const day = today.getDay();
  const daylist = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  const dayName = daylist[day];
  
  // Update UI for Day
  const dayDisplay = document.getElementById("day-display");
  if(dayDisplay) dayDisplay.textContent = dayName;

  // Get Time
  let hour = today.getHours();
  const minute = today.getMinutes();
  const second = today.getSeconds();

  // Determine AM or PM
  let prepand = (hour >= 12) ? " PM " : " AM ";

  // Convert 24-hour format to 12-hour format
  hour = (hour >= 12) ? hour - 12 : hour;

  // Check for special cases when hour is 0 and it's PM
  if (hour === 0 && prepand === ' PM ') {
      if (minute === 0 && second === 0) {
          hour = 12;
          prepand = ' Noon';
      } else {
          hour = 12;
          prepand = ' PM';
      }
  }

  // Check for special cases when hour is 0 and it's AM
  if (hour === 0 && prepand === ' AM ') {
      if (minute === 0 && second === 0) {
          hour = 12;
          prepand = ' Midnight';
      } else {
          hour = 12;
          prepand = ' AM';
      }
  }
  
  // Formatting helper for minutes/seconds
  const fmt = (num) => num.toString().padStart(2, '0');

  // Update UI for Time
  const timeString = \`\${hour}\${prepand} <span class="separator">:</span> \${fmt(minute)} <span class="separator">:</span> \${fmt(second)}\`;
  const timeDisplay = document.getElementById("time-display");
  if(timeDisplay) timeDisplay.innerHTML = timeString;
  
  // Log to custom console (simplified for demo)
  // CustomConsole.log(\`Current Time: \${hour}\${prepand} : \${minute} : \${second}\`);
}

// Start immediately
updateClock();

// Loop every second
window.clockInterval = setInterval(updateClock, 1000);
CustomConsole.success("Clock started with new Noon/Midnight logic!");
      `;

      // Initialize IDE
      document.addEventListener('DOMContentLoaded', () => {
        MiniIDE.create("ide-root", defaultCode);
      });
    </script>
  </body>
</html>
